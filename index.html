<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Tennis Ladder Pro</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.5/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
        const { useState, useEffect } = React;
        
        // Simple icon components
        const Trophy = () => <span style={{fontSize: '24px'}}>üèÜ</span>;
        const Users = () => <span style={{fontSize: '24px'}}>üë•</span>;
        const Settings = () => <span style={{fontSize: '24px'}}>‚öôÔ∏è</span>;
        const Target = () => <span style={{fontSize: '24px'}}>üéØ</span>;
        const Crown = () => <span style={{fontSize: '24px'}}>üëë</span>;
        const Mail = () => <span style={{fontSize: '24px'}}>üìß</span>;
        const Star = () => <span style={{fontSize: '24px'}}>‚≠ê</span>;
        const Clock = () => <span style={{fontSize: '24px'}}>‚è∞</span>;
        const Plus = () => <span style={{fontSize: '20px'}}>‚ûï</span>;
        const Calendar = () => <span style={{fontSize: '24px'}}>üìÖ</span>;

        const LadderSettingsView = ({ selectedLadder, setSelectedLadder, setCurrentView }) => {
            const [settings, setSettings] = useState({
                // Challenge Rules
                challengeWindowDays: 7,
                maxPendingChallenges: 3,
                allowBackToBackChallenges: false,
                challengeRangeLimit: 5,
                responseTimeLimit: 48,
                
                // Match Rules
                allowOneSetMatches: false,
                winSetAt: 6,
                winSetBy: 2,
                defaultMatchFormat: 'best-of-3',
                allowTenPointTiebreak: true,
                
                // Scoring System
                pointsAllPlayers: 2,
                pointsWinSet: 1,
                pointsWinMatch: 5,
                pointsThreeSets: 2,
                pointsStraightSets: 1,
                
                // Ladder Behavior
                showUSTARatings: true,
                allowLocationSpecify: false,
                seasonLength: 12,
                minimumMatchesForPlayoffs: 4,
                playoffBracketSize: 16
            });

            const [activeTab, setActiveTab] = useState('challenge-rules');

            // Load existing settings when component mounts
            useEffect(() => {
                if (selectedLadder?.settings) {
                    setSettings(prev => ({
                        ...prev,
                        ...selectedLadder.settings
                    }));
                }
            }, [selectedLadder]);

            const updateSetting = (key, value) => {
                setSettings(prev => ({
                    ...prev,
                    [key]: value
                }));
            };

            const saveSettings = () => {
                setSelectedLadder(prev => ({
                    ...prev,
                    settings: settings
                }));
                
                alert('Settings saved successfully!');
                setCurrentView('admin-dashboard');
            };

            const TabButton = ({ id, label, isActive, onClick }) => (
                <button
                    onClick={onClick}
                    className={`px-4 py-2 text-sm font-medium rounded-lg ${
                        isActive 
                            ? 'bg-green-600 text-white' 
                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                    }`}
                >
                    {label}
                </button>
            );

            const SettingRow = ({ label, description, children }) => (
                <div className="py-4 border-b border-gray-200 last:border-b-0">
                    <div className="flex items-start justify-between">
                        <div className="flex-1 pr-4">
                            <label className="text-sm font-medium text-gray-900">{label}</label>
                            {description && (
                                <p className="text-sm text-gray-500 mt-1">{description}</p>
                            )}
                        </div>
                        <div className="flex-shrink-0">
                            {children}
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="bg-white shadow-sm border-b">
                        <div className="px-4 py-3 flex justify-between items-center">
                            <h1 className="text-xl font-bold text-gray-900">Ladder Settings</h1>
                            <button
                                onClick={() => setCurrentView('admin-dashboard')}
                                className="text-gray-600 hover:text-gray-800"
                            >
                                Back
                            </button>
                        </div>
                    </div>
                    
                    <div className="p-4 max-w-4xl mx-auto">
                        <div className="bg-white rounded-lg shadow">
                            {/* Tab Navigation */}
                            <div className="p-6 border-b border-gray-200">
                                <div className="flex flex-wrap gap-2">
                                    <TabButton
                                        id="challenge-rules"
                                        label="Challenge Rules"
                                        isActive={activeTab === 'challenge-rules'}
                                        onClick={() => setActiveTab('challenge-rules')}
                                    />
                                    <TabButton
                                        id="match-rules"
                                        label="Match Format"
                                        isActive={activeTab === 'match-rules'}
                                        onClick={() => setActiveTab('match-rules')}
                                    />
                                    <TabButton
                                        id="points-system"
                                        label="Points System"
                                        isActive={activeTab === 'points-system'}
                                        onClick={() => setActiveTab('points-system')}
                                    />
                                    <TabButton
                                        id="ladder-behavior"
                                        label="Ladder Behavior"
                                        isActive={activeTab === 'ladder-behavior'}
                                        onClick={() => setActiveTab('ladder-behavior')}
                                    />
                                </div>
                            </div>

                            {/* Tab Content */}
                            <div className="p-6">
                                {activeTab === 'challenge-rules' && (
                                    <div className="space-y-0">
                                        <SettingRow
                                            label="Challenge Window"
                                            description="How many days ahead can players schedule challenges?"
                                        >
                                            <select
                                                value={settings.challengeWindowDays}
                                                onChange={(e) => updateSetting('challengeWindowDays', parseInt(e.target.value))}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value={3}>3 days</option>
                                                <option value={7}>7 days</option>
                                                <option value={14}>14 days</option>
                                                <option value={21}>21 days</option>
                                                <option value={30}>30 days</option>
                                            </select>
                                        </SettingRow>

                                        <SettingRow
                                            label="Challenge Range Limit"
                                            description="How many spots up the ladder can players challenge?"
                                        >
                                            <select
                                                value={settings.challengeRangeLimit}
                                                onChange={(e) => updateSetting('challengeRangeLimit', parseInt(e.target.value))}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value={3}>3 spots</option>
                                                <option value={5}>5 spots</option>
                                                <option value={10}>10 spots</option>
                                                <option value={999}>Unlimited</option>
                                            </select>
                                        </SettingRow>

                                        <SettingRow
                                            label="Response Time Limit"
                                            description="How long do players have to respond to challenges?"
                                        >
                                            <select
                                                value={settings.responseTimeLimit}
                                                onChange={(e) => updateSetting('responseTimeLimit', parseInt(e.target.value))}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value={24}>24 hours</option>
                                                <option value={48}>48 hours</option>
                                                <option value={72}>72 hours</option>
                                                <option value={168}>1 week</option>
                                            </select>
                                        </SettingRow>

                                        <SettingRow
                                            label="Max Pending Challenges"
                                            description="Maximum number of pending challenges per player"
                                        >
                                            <select
                                                value={settings.maxPendingChallenges}
                                                onChange={(e) => updateSetting('maxPendingChallenges', parseInt(e.target.value))}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value={1}>1 challenge</option>
                                                <option value={2}>2 challenges</option>
                                                <option value={3}>3 challenges</option>
                                                <option value={5}>5 challenges</option>
                                            </select>
                                        </SettingRow>

                                        <SettingRow
                                            label="Back-to-Back Challenges"
                                            description="Allow players to challenge the same opponent consecutively?"
                                        >
                                            <label className="flex items-center">
                                                <input
                                                    type="checkbox"
                                                    checked={settings.allowBackToBackChallenges}
                                                    onChange={(e) => updateSetting('allowBackToBackChallenges', e.target.checked)}
                                                    className="w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                                />
                                                <span className="ml-2 text-sm text-gray-700">Allow</span>
                                            </label>
                                        </SettingRow>
                                    </div>
                                )}

                                {activeTab === 'match-rules' && (
                                    <div className="space-y-0">
                                        <SettingRow
                                            label="Default Match Format"
                                            description="Standard format for ladder matches"
                                        >
                                            <select
                                                value={settings.defaultMatchFormat}
                                                onChange={(e) => updateSetting('defaultMatchFormat', e.target.value)}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value="best-of-3">Best of 3 sets</option>
                                                <option value="best-of-5">Best of 5 sets</option>
                                                <option value="pro-set">Pro set (first to 8)</option>
                                                <option value="one-set">One set matches</option>
                                            </select>
                                        </SettingRow>

                                        <SettingRow
                                            label="Allow One Set Matches"
                                            description="Permit players to play abbreviated one-set matches"
                                        >
                                            <label className="flex items-center">
                                                <input
                                                    type="checkbox"
                                                    checked={settings.allowOneSetMatches}
                                                    onChange={(e) => updateSetting('allowOneSetMatches', e.target.checked)}
                                                    className="w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                                />
                                                <span className="ml-2 text-sm text-gray-700">Allow</span>
                                            </label>
                                        </SettingRow>

                                        <SettingRow
                                            label="Win Set At"
                                            description="Games required to win a set"
                                        >
                                            <select
                                                value={settings.winSetAt}
                                                onChange={(e) => updateSetting('winSetAt', parseInt(e.target.value))}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value={6}>6 games</option>
                                                <option value={8}>8 games (pro set)</option>
                                            </select>
                                        </SettingRow>

                                        <SettingRow
                                            label="10-Point Tiebreak for Deciding Set"
                                            description="Use 10-point tiebreak instead of full third set"
                                        >
                                            <label className="flex items-center">
                                                <input
                                                    type="checkbox"
                                                    checked={settings.allowTenPointTiebreak}
                                                    onChange={(e) => updateSetting('allowTenPointTiebreak', e.target.checked)}
                                                    className="w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                                />
                                                <span className="ml-2 text-sm text-gray-700">Allow</span>
                                            </label>
                                        </SettingRow>
                                    </div>
                                )}

                                {activeTab === 'points-system' && (
                                    <div className="space-y-0">
                                        <SettingRow
                                            label="Points for All Players"
                                            description="Base points awarded to all players in a match"
                                        >
                                            <input
                                                type="number"
                                                min="0"
                                                max="10"
                                                value={settings.pointsAllPlayers}
                                                onChange={(e) => updateSetting('pointsAllPlayers', parseInt(e.target.value))}
                                                className="w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:ring-2 focus:ring-green-500"
                                            />
                                        </SettingRow>

                                        <SettingRow
                                            label="Points for Winning a Set"
                                            description="Additional points for each set won"
                                        >
                                            <input
                                                type="number"
                                                min="0"
                                                max="10"
                                                value={settings.pointsWinSet}
                                                onChange={(e) => updateSetting('pointsWinSet', parseInt(e.target.value))}
                                                className="w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:ring-2 focus:ring-green-500"
                                            />
                                        </SettingRow>

                                        <SettingRow
                                            label="Points for Winning Match"
                                            description="Bonus points for winning the entire match"
                                        >
                                            <input
                                                type="number"
                                                min="0"
                                                max="20"
                                                value={settings.pointsWinMatch}
                                                onChange={(e) => updateSetting('pointsWinMatch', parseInt(e.target.value))}
                                                className="w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:ring-2 focus:ring-green-500"
                                            />
                                        </SettingRow>

                                        <div className="mt-6 p-4 bg-blue-50 rounded-lg">
                                            <h4 className="text-sm font-medium text-blue-900 mb-2">Points Example:</h4>
                                            <p className="text-sm text-blue-700">
                                                Player wins 6-4, 6-2: Base ({settings.pointsAllPlayers}) + 2 sets ({settings.pointsWinSet * 2}) + 
                                                Match win ({settings.pointsWinMatch}) = {' '}
                                                <strong>{settings.pointsAllPlayers + (settings.pointsWinSet * 2) + settings.pointsWinMatch} points</strong>
                                            </p>
                                        </div>
                                    </div>
                                )}

                                {activeTab === 'ladder-behavior' && (
                                    <div className="space-y-0">
                                        <SettingRow
                                            label="Season Length"
                                            description="Duration of the ladder season in weeks"
                                        >
                                            <select
                                                value={settings.seasonLength}
                                                onChange={(e) => updateSetting('seasonLength', parseInt(e.target.value))}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value={8}>8 weeks</option>
                                                <option value={10}>10 weeks</option>
                                                <option value={12}>12 weeks</option>
                                                <option value={16}>16 weeks</option>
                                                <option value={20}>20 weeks</option>
                                                <option value={999}>Ongoing</option>
                                            </select>
                                        </SettingRow>

                                        <SettingRow
                                            label="Minimum Matches for Playoffs"
                                            description="Required matches to qualify for playoff tournament"
                                        >
                                            <select
                                                value={settings.minimumMatchesForPlayoffs}
                                                onChange={(e) => updateSetting('minimumMatchesForPlayoffs', parseInt(e.target.value))}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value={2}>2 matches</option>
                                                <option value={3}>3 matches</option>
                                                <option value={4}>4 matches</option>
                                                <option value={5}>5 matches</option>
                                                <option value={6}>6 matches</option>
                                            </select>
                                        </SettingRow>

                                        <SettingRow
                                            label="Playoff Bracket Size"
                                            description="Number of players in main playoff bracket"
                                        >
                                            <select
                                                value={settings.playoffBracketSize}
                                                onChange={(e) => updateSetting('playoffBracketSize', parseInt(e.target.value))}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value={8}>8 players</option>
                                                <option value={16}>16 players</option>
                                                <option value={32}>32 players</option>
                                            </select>
                                        </SettingRow>

                                        <SettingRow
                                            label="Show USTA Ratings"
                                            description="Display player USTA ratings on challenge pages"
                                        >
                                            <label className="flex items-center">
                                                <input
                                                    type="checkbox"
                                                    checked={settings.showUSTARatings}
                                                    onChange={(e) => updateSetting('showUSTARatings', e.target.checked)}
                                                    className="w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                                />
                                                <span className="ml-2 text-sm text-gray-700">Show</span>
                                            </label>
                                        </SettingRow>

                                        <SettingRow
                                            label="Allow Location Specification"
                                            description="Let players specify court location for challenges"
                                        >
                                            <label className="flex items-center">
                                                <input
                                                    type="checkbox"
                                                    checked={settings.allowLocationSpecify}
                                                    onChange={(e) => updateSetting('allowLocationSpecify', e.target.checked)}
                                                    className="w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                                />
                                                <span className="ml-2 text-sm text-gray-700">Allow</span>
                                            </label>
                                        </SettingRow>
                                    </div>
                                )}
                            </div>

                            {/* Save Button */}
                            <div className="px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg">
                                <div className="flex justify-end space-x-3">
                                    <button
                                        onClick={() => setCurrentView('admin-dashboard')}
                                        className="px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        onClick={saveSettings}
                                        className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"
                                    >
                                        Save Settings
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };


        const TennisLadderApp = () => {
            const [currentView, setCurrentView] = useState('login');
            const [currentUser, setCurrentUser] = useState(null);
            const [ladders, setLadders] = useState([]);
            const [selectedLadder, setSelectedLadder] = useState(null);
            const [players, setPlayers] = useState([]);
            const [challenges, setChallenges] = useState([]);
            const [matches, setMatches] = useState([]);

            // Initialize with sample data
            useEffect(() => {
                const sampleLadder = {
                    id: 1,
                    name: "Men's Challenge Ladder",
                    description: "Weekly men's singles ladder",
                    type: "Men's Singles",
                    rankingFormula: "Points-Based",
                    startDate: "2025-06-15",
                    allowJoining: true,
                    adminName: "Zach CARDAIS",
                    adminEmail: "zcardais@gmail.com",
                    settings: {
                        allowBackToBack: false,
                        allowLocationSpecify: false,
                        showUSTARatings: true,
                        allowOneSetMatches: false,
                        winSetAt: 6,
                        winSetBy: 2,
                        pointsAllPlayers: 2,
                        pointsWinSet: 1,
                        pointsWinMatch: 5,
                        pointsThreeSets: 2,
                        pointsStraightSets: 1
                    }
                };


            const MatchHistoryView = () => {
                const userMatches = matches.filter(m => 
                    m.player1Id === currentUser?.id || m.player2Id === currentUser?.id
                );

                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="bg-white shadow-sm border-b">
                            <div className="px-4 py-3 flex justify-between items-center">
                                <h1 className="text-xl font-bold text-gray-900">Match History</h1>
                                <button
                                    onClick={() => setCurrentView('player-dashboard')}
                                    className="text-gray-600 hover:text-gray-800"
                                >
                                    Back
                                </button>
                            </div>
                        </div>
                        
                        <div className="p-4">
                            <div className="bg-white rounded-lg shadow overflow-hidden">
                                <div className="px-6 py-4 border-b border-gray-200">
                                    <h2 className="text-lg font-semibold text-gray-900">Your Recent Matches</h2>
                                </div>
                                
                                {userMatches.length === 0 ? (
                                    <div className="px-6 py-8 text-center">
                                        <div className="text-4xl mb-4">üéæ</div>
                                        <p className="text-gray-500">No matches played yet</p>
                                        <button
                                            onClick={() => setCurrentView('challenge')}
                                            className="mt-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"
                                        >
                                            Challenge Someone
                                        </button>
                                    </div>
                                ) : (
                                    <div className="divide-y divide-gray-200">
                                        {userMatches.map((match) => {
                                            const opponent = players.find(p => 
                                                p.id === (match.player1Id === currentUser?.id ? match.player2Id : match.player1Id)
                                            );
                                            const isWinner = match.winnerId === currentUser?.id;
                                            
                                            return (
                                                <div key={match.id} className="px-6 py-4">
                                                    <div className="flex items-center justify-between">
                                                        <div>
                                                            <div className={`text-sm font-medium ${isWinner ? 'text-green-600' : 'text-red-600'}`}>
                                                                {isWinner ? 'WIN' : 'LOSS'} vs {opponent?.name}
                                                            </div>
                                                            <div className="text-sm text-gray-900 font-mono">
                                                                {match.score}
                                                            </div>
                                                            <div className="text-sm text-gray-500">
                                                                {match.date}
                                                            </div>
                                                        </div>
                                                        
                                                        <div className={`px-3 py-1 rounded-full text-xs font-medium ${
                                                            isWinner ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                                                        }`}>
                                                            {isWinner ? 'W' : 'L'}
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            const RegisterScreen = () => {
                const [formData, setFormData] = useState({
                    name: '',
                    email: '',
                    phone: '',
                    rating: ''
                });

                const handleRegister = () => {
                    if (formData.name && formData.email) {
                        const newPlayer = {
                            id: players.length + 1,
                            name: formData.name,
                            email: formData.email,
                            ranking: players.length + 1,
                            points: 0,
                            matches: 0,
                            wins: 0,
                            losses: 0,
                            active: true
                        };
                        setPlayers([...players, newPlayer]);
                        alert('Registration successful! You can now login.');
                        setCurrentView('login');
                    } else {
                        alert('Please fill in required fields.');
                    }
                };

                return (
                    <div className="min-h-screen bg-gray-50 py-8 px-4">
                        <div className="max-w-md mx-auto bg-white rounded-lg shadow p-6">
                            <h2 className="text-2xl font-bold text-gray-900 mb-6">Register for Ladder</h2>
                            
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                                    <input 
                                        type="text" 
                                        value={formData.name}
                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                        className="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent" 
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                                    <input 
                                        type="email" 
                                        value={formData.email}
                                        onChange={(e) => setFormData({...formData, email: e.target.value})}
                                        className="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent" 
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                    <input 
                                        type="tel" 
                                        value={formData.phone}
                                        onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                        className="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent" 
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">USTA Rating (Optional)</label>
                                    <select 
                                        value={formData.rating}
                                        onChange={(e) => setFormData({...formData, rating: e.target.value})}
                                        className="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                    >
                                        <option value="">Select Rating</option>
                                        <option value="3.0">3.0</option>
                                        <option value="3.5">3.5</option>
                                        <option value="4.0">4.0</option>
                                        <option value="4.5">4.5</option>
                                        <option value="5.0">5.0</option>
                                        <option value="5.5">5.5</option>
                                    </select>
                                </div>
                                
                                <button
                                    onClick={handleRegister}
                                    className="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition duration-200 font-medium"
                                >
                                    Register
                                </button>
                                
                                <button
                                    onClick={() => setCurrentView('login')}
                                    className="w-full text-gray-600 hover:text-gray-800"
                                >
                                    Back to Login
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            const AdminDashboard = () => (
                <div className="min-h-screen bg-gray-50">
                    <div className="bg-white shadow-sm border-b">
                        <div className="px-4 py-3 flex justify-between items-center">
                            <h1 className="text-xl font-bold text-gray-900">Admin Dashboard</h1>
                            <button
                                onClick={() => setCurrentView('login')}
                                className="text-gray-600 hover:text-gray-800"
                            >
                                Logout
                            </button>
                        </div>
                    </div>
                    
                    <div className="p-4 space-y-4">
                        <div className="bg-white rounded-lg shadow p-4 mb-6">
                            <h2 className="text-lg font-semibold text-gray-900 mb-3">Ladder Overview</h2>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <div className="text-center">
                                    <div className="text-2xl font-bold text-green-600">{players.length}</div>
                                    <div className="text-sm text-gray-600">Active Players</div>
                                </div>
                                <div className="text-center">
                                    <div className="text-2xl font-bold text-blue-600">{challenges.length}</div>
                                    <div className="text-sm text-gray-600">Pending Challenges</div>
                                </div>
                                <div className="text-center">
                                    <div className="text-2xl font-bold text-purple-600">{challenges.filter(c => c.status === 'accepted').length}</div>
                                    <div className="text-sm text-gray-600">Matches Scheduled</div>
                                </div>
                                <div className="text-center">
                                    <div className="text-2xl font-bold text-yellow-600">12</div>
                                    <div className="text-sm text-gray-600">Weeks Remaining</div>
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <AdminCard
                                icon="üèÜ"
                                title="View Ladder Rankings"
                                description="See current player rankings"
                                onClick={() => setCurrentView('rankings')}
                            />
                            
                            <AdminCard
                                icon="üéØ"
                                title="Outstanding Challenges"
                                description="View all pending challenges"
                                onClick={() => setCurrentView('challenges')}
                            />
                            
                            <AdminCard
                                icon="üë•"
                                title="Manage Players"
                                description="Add/Edit players"
                                onClick={() => setCurrentView('manage-players')}
                            />
                            
                            <AdminCard
                                icon="‚öôÔ∏è"
                                title="Ladder Settings"
                                description="Configure ladder rules"
                                onClick={() => setCurrentView('settings')}
                            />
                            
                            <AdminCard
                                icon="üëë"
                                title="Create Tournament"
                                description="Generate playoff brackets"
                                onClick={() => setCurrentView('tournament')}
                            />
                            
                            <AdminCard
                                icon="üìß"
                                title="Email Players"
                                description="Send messages to players"
                                onClick={() => setCurrentView('email')}
                            />
                        </div>
                    </div>
                </div>
            );

            const AdminCard = ({ icon, title, description, onClick }) => (
                <div
                    onClick={onClick}
                    className="bg-white rounded-lg shadow p-6 hover:shadow-md transition duration-200 cursor-pointer border border-gray-200"
                >
                    <div className="flex items-center mb-3">
                        <span className="text-2xl mr-3">{icon}</span>
                        <h3 className="text-lg font-medium text-gray-900">{title}</h3>
                    </div>
                    <p className="text-gray-600">{description}</p>
                </div>
            );

            const PlayerDashboard = () => {
                const currentPlayerData = players.find(p => p.id === currentUser?.id);
                const currentPlayerRanking = currentPlayerData?.ranking || 0;
                const playerChallenges = challenges.filter(c => 
                    c.challengerId === currentUser?.id || c.challengedId === currentUser?.id
                );

                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="bg-white shadow-sm border-b">
                            <div className="px-4 py-3 flex justify-between items-center">
                                <h1 className="text-xl font-bold text-gray-900">Player Dashboard</h1>
                                <button
                                    onClick={() => setCurrentView('login')}
                                    className="text-gray-600 hover:text-gray-800"
                                >
                                    Logout
                                </button>
                            </div>
                        </div>
                        
                        <div className="p-4 space-y-6">
                            <div className="bg-white rounded-lg shadow p-6">
                                <h2 className="text-lg font-semibold text-gray-900 mb-4">Your Status</h2>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div className="text-center">
                                        <div className="text-2xl font-bold text-green-600">#{currentPlayerRanking}</div>
                                        <div className="text-sm text-gray-600">Current Rank</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="text-2xl font-bold text-blue-600">{currentPlayerData?.points || 0}</div>
                                        <div className="text-sm text-gray-600">Points</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="text-2xl font-bold text-purple-600">{currentPlayerData?.matches || 0}</div>
                                        <div className="text-sm text-gray-600">Matches</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="text-2xl font-bold text-yellow-600">
                                            {currentPlayerData?.matches > 0 ? Math.round((currentPlayerData.wins / currentPlayerData.matches) * 100) : 0}%
                                        </div>
                                        <div className="text-sm text-gray-600">Win Rate</div>
                                    </div>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <PlayerCard
                                    icon="üéØ"
                                    title="Challenge Player"
                                    description="Challenge someone above you"
                                    onClick={() => setCurrentView('challenge')}
                                />
                                
                                <PlayerCard
                                    icon="üèÜ"
                                    title="View Rankings"
                                    description="See current ladder standings"
                                    onClick={() => setCurrentView('rankings')}
                                />
                                
                                <PlayerCard
                                    icon="‚è∞"
                                    title="My Challenges"
                                    description={`${playerChallenges.length} active challenges`}
                                    onClick={() => setCurrentView('my-challenges')}
                                />
                                
                                <PlayerCard
                                    icon="‚≠ê"
                                    title="Match History"
                                    description="View your past matches"
                                    onClick={() => setCurrentView('match-history')}
                                />
                            </div>
                        </div>
                    </div>
                );
            };

            const PlayerCard = ({ icon, title, description, onClick }) => (
                <div
                    onClick={onClick}
                    className="bg-white rounded-lg shadow p-6 hover:shadow-md transition duration-200 cursor-pointer border border-gray-200"
                >
                    <div className="flex items-center mb-3">
                        <span className="text-2xl mr-3">{icon}</span>
                        <h3 className="text-lg font-medium text-gray-900">{title}</h3>
                    </div>
                    <p className="text-gray-600">{description}</p>
                </div>
            );

            const RankingsView = () => (
                <div className="min-h-screen bg-gray-50">
                    <div className="bg-white shadow-sm border-b">
                        <div className="px-4 py-3 flex justify-between items-center">
                            <h1 className="text-xl font-bold text-gray-900">Ladder Rankings</h1>
                            <button
                                onClick={() => setCurrentView(currentUser?.role === 'admin' ? 'admin-dashboard' : 'player-dashboard')}
                                className="text-gray-600 hover:text-gray-800"
                            >
                                Back
                            </button>
                        </div>
                    </div>
                    
                    <div className="p-4">
                        <div className="bg-white rounded-lg shadow overflow-hidden">
                            <div className="px-6 py-4 border-b border-gray-200">
                                <h2 className="text-lg font-semibold text-gray-900">Current Standings</h2>
                            </div>
                            
                            <div className="divide-y divide-gray-200">
                                {players.map((player, index) => (
                                    <div key={player.id} className="px-6 py-4 flex items-center justify-between">
                                        <div className="flex items-center">
                                            <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${
                                                player.ranking <= 3 ? 'bg-yellow-100' : 'bg-green-100'
                                            }`}>
                                                <span className={`text-sm font-semibold ${
                                                    player.ranking <= 3 ? 'text-yellow-800' : 'text-green-800'
                                                }`}>
                                                    #{player.ranking}
                                                </span>
                                            </div>
                                            <div className="ml-4">
                                                <div className="text-sm font-medium text-gray-900">
                                                    {player.name}
                                                    {player.id === currentUser?.id && (
                                                        <span className="ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">You</span>
                                                    )}
                                                </div>
                                                <div className="text-sm text-gray-500">{player.points} points</div>
                                            </div>
                                        </div>
                                        
                                        <div className="text-right">
                                            <div className="text-sm text-gray-900">{player.wins}-{player.losses}</div>
                                            <div className="text-sm text-gray-500">{player.matches} matches</div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );

            const ChallengesView = () => (
                <div className="min-h-screen bg-gray-50">
                    <div className="bg-white shadow-sm border-b">
                        <div className="px-4 py-3 flex justify-between items-center">
                            <h1 className="text-xl font-bold text-gray-900">Outstanding Challenges</h1>
                            <button
                                onClick={() => setCurrentView('admin-dashboard')}
                                className="text-gray-600 hover:text-gray-800"
                            >
                                Back
                            </button>
                        </div>
                    </div>
                    
                    <div className="p-4">
                        <div className="bg-white rounded-lg shadow overflow-hidden">
                            <div className="px-6 py-4 border-b border-gray-200">
                                <h2 className="text-lg font-semibold text-gray-900">Pending Challenges</h2>
                            </div>
                            
                            <div className="divide-y divide-gray-200">
                                {challenges.map((challenge) => {
                                    const challenger = players.find(p => p.id === challenge.challengerId);
                                    const challenged = players.find(p => p.id === challenge.challengedId);
                                    
                                    return (
                                        <div key={challenge.id} className="px-6 py-4">
                                            <div className="flex items-center justify-between">
                                                <div>
                                                    <div className="text-sm font-medium text-gray-900">
                                                        {challenger?.name} vs {challenged?.name}
                                                    </div>
                                                    <div className="text-sm text-gray-500">
                                                        Rank #{challenger?.ranking} challenging #{challenged?.ranking}
                                                    </div>
                                                    <div className="text-sm text-gray-500">
                                                        Proposed: {challenge.date}
                                                    </div>
                                                </div>
                                                
                                                <div className="flex items-center">
                                                    <span className={`px-2 py-1 text-xs rounded-full ${
                                                        challenge.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :
                                                        challenge.status === 'accepted' ? 'bg-green-100 text-green-800' :
                                                        'bg-red-100 text-red-800'
                                                    }`}>
                                                        {challenge.status}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            );

            const ChallengePlayerView = () => {
                const currentPlayerRanking = players.find(p => p.id === currentUser?.id)?.ranking || 999;
                const challengeablePlayers = players.filter(p => p.ranking < currentPlayerRanking);

                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="bg-white shadow-sm border-b">
                            <div className="px-4 py-3 flex justify-between items-center">
                                <h1 className="text-xl font-bold text-gray-900">Challenge a Player</h1>
                                <button
                                    onClick={() => setCurrentView('player-dashboard')}
                                    className="text-gray-600 hover:text-gray-800"
                                >
                                    Back
                                </button>
                            </div>
                        </div>
                        
                        <div className="p-4">
                            <div className="bg-white rounded-lg shadow p-6 mb-4">
                                <h2 className="text-lg font-semibold text-gray-900 mb-4">Players You Can Challenge</h2>
                                <p className="text-sm text-gray-600 mb-4">You can challenge players ranked above you.</p>
                                
                                {challengeablePlayers.length === 0 ? (
                                    <div className="text-center py-8">
                                        <div className="text-4xl mb-4">üèÜ</div>
                                        <p className="text-gray-500">You're already #1! Great job!</p>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {challengeablePlayers.map((player) => {
                                            const existingChallenge = challenges.find(c => 
                                                c.challengerId === currentUser?.id && c.challengedId === player.id
                                            );

                                            return (
                                                <div key={player.id} className="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                                    <div>
                                                        <div className="text-sm font-medium text-gray-900">#{player.ranking} {player.name}</div>
                                                        <div className="text-sm text-gray-500">{player.points} points</div>
                                                    </div>
                                                    
                                                    {existingChallenge ? (
                                                        <span className="text-sm text-yellow-600">Challenge Pending</span>
                                                    ) : (
                                                        <button
                                                            onClick={() => {
                                                                const newChallenge = {
                                                                    id: challenges.length + 1,
                                                                    challengerId: currentUser.id,
                                                                    challengedId: player.id,
                                                                    status: 'pending',
                                                                    date: new Date().toISOString().split('T')[0],
                                                                    ladderid: 1
                                                                };
                                                                setChallenges([...challenges, newChallenge]);
                                                                alert(`Challenge sent to ${player.name}!`);
                                                            }}
                                                            className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200"
                                                        >
                                                            Challenge
                                                        </button>
                                                    )}
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            const MyChallengesView = () => {
                const myChallenges = challenges.filter(c => 
                    c.challengerId === currentUser?.id || c.challengedId === currentUser?.id
                );

                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="bg-white shadow-sm border-b">
                            <div className="px-4 py-3 flex justify-between items-center">
                                <h1 className="text-xl font-bold text-gray-900">My Challenges</h1>
                                <button
                                    onClick={() => setCurrentView('player-dashboard')}
                                    className="text-gray-600 hover:text-gray-800"
                                >
                                    Back
                                </button>
                            </div>
                        </div>
                        
                        <div className="p-4">
                            <div className="bg-white rounded-lg shadow overflow-hidden">
                                <div className="px-6 py-4 border-b border-gray-200">
                                    <h2 className="text-lg font-semibold text-gray-900">Active Challenges</h2>
                                </div>
                                
                                {myChallenges.length === 0 ? (
                                    <div className="px-6 py-8 text-center">
                                        <div className="text-4xl mb-4">‚è∞</div>
                                        <p className="text-gray-500">No active challenges</p>
                                        <button
                                            onClick={() => setCurrentView('challenge')}
                                            className="mt-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"
                                        >
                                            Challenge Someone
                                        </button>
                                    </div>
                                ) : (
                                    <div className="divide-y divide-gray-200">
                                        {myChallenges.map((challenge) => {
                                            const challenger = players.find(p => p.id === challenge.challengerId);
                                            const challenged = players.find(p => p.id === challenge.challengedId);
                                            const isChallenger = challenge.challengerId === currentUser?.id;
                                            
                                            return (
                                                <div key={challenge.id} className="px-6 py-4">
                                                    <div className="flex items-center justify-between">
                                                        <div>
                                                            <div className="text-sm font-medium text-gray-900">
                                                                {isChallenger ? `You challenged ${challenged?.name}` : `${challenger?.name} challenged you`}
                                                            </div>
                                                            <div className="text-sm text-gray-500">
                                                                Proposed: {challenge.date}
                                                            </div>
                                                            <div className="text-sm text-gray-500">
                                                                Rank #{challenger?.ranking} vs #{challenged?.ranking}
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="flex items-center space-x-2">
                                                            {challenge.status === 'pending' && !isChallenger && (
                                                                <>
                                                                    <button
                                                                        onClick={() => {
                                                                            setChallenges(challenges.map(c => 
                                                                                c.id === challenge.id ? {...c, status: 'accepted'} : c
                                                                            ));
                                                                            alert('Challenge accepted! You can now schedule your match.');
                                                                        }}
                                                                        className="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700"
                                                                    >
                                                                        Accept
                                                                    </button>
                                                                    <button
                                                                        onClick={() => {
                                                                            setChallenges(challenges.filter(c => c.id !== challenge.id));
                                                                            alert('Challenge declined.');
                                                                        }}
                                                                        className="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700"
                                                                    >
                                                                        Decline
                                                                    </button>
                                                                </>
                                                            )}
                                                            
                                                            {challenge.status === 'accepted' && (
                                                                <button
                                                                    onClick={() => setCurrentView('report-score')}
                                                                    className="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700"
                                                                >
                                                                    Report Score
                                                                </button>
                                                            )}
                                                            
                                                            {challenge.status === 'pending' && isChallenger && (
                                                                <button
                                                                    onClick={() => {
                                                                        setChallenges(challenges.filter(c => c.id !== challenge.id));
                                                                        alert('Challenge withdrawn.');
                                                                    }}
                                                                    className="bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700"
                                                                >
                                                                    Withdraw
                                                                </button>
                                                            )}
                                                            
                                                            <span className={`px-2 py-1 text-xs rounded-full ${
                                                                challenge.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :
                                                                challenge.status === 'accepted' ? 'bg-green-100 text-green-800' :
                                                                'bg-red-100 text-red-800'
                                                            }`}>
                                                                {challenge.status}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            const ManagePlayersView = () => (
                <div className="min-h-screen bg-gray-50">
                    <div className="bg-white shadow-sm border-b">
                        <div className="px-4 py-3 flex justify-between items-center">
                            <h1 className="text-xl font-bold text-gray-900">Manage Players</h1>
                            <button
                                onClick={() => setCurrentView('admin-dashboard')}
                                className="text-gray-600 hover:text-gray-800"
                            >
                                Back
                            </button>
                        </div>
                    </div>
                    
                    <div className="p-4">
                        <div className="bg-white rounded-lg shadow p-6 mb-4">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="text-lg font-semibold text-gray-900">Player Management</h2>
                                <button
                                    onClick={() => setCurrentView('add-player')}
                                    className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center"
                                >
                                    <span className="mr-2">‚ûï</span>
                                    Add Player
                                </button>
                            </div>
                            
                            <div className="space-y-3">
                                {players.map((player) => (
                                    <div key={player.id} className="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                                        <div>
                                            <div className="text-sm font-medium text-gray-900">
                                                #{player.ranking} {player.name}
                                            </div>
                                            <div className="text-sm text-gray-500">
                                                {player.email} ‚Ä¢ {player.points} points ‚Ä¢ {player.matches} matches
                                            </div>
                                        </div>
                                        
                                        <div className="flex space-x-2">
                                            <button className="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                                Edit
                                            </button>
                                            <button 
                                                onClick={() => {
                                                    if (confirm(`Remove ${player.name} from the ladder?`)) {
                                                        setPlayers(players.filter(p => p.id !== player.id));
                                                    }
                                                }}
                                                className="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700"
                                            >
                                                Remove
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
                            );
            };

            const renderCurrentView = () => {
                switch (currentView) {
                    case 'login':
                        return <LoginScreen />;
                    case 'register':
                        return <RegisterScreen />;
                    case 'admin-dashboard':
                        return <AdminDashboard />;
                    case 'player-dashboard':
                        return <PlayerDashboard />;
                    case 'rankings':
                        return <RankingsView />;
                    case 'challenges':
                        return <ChallengesView />;
                    case 'challenge':
                        return <ChallengePlayerView />;
                    case 'my-challenges':
                        return <MyChallengesView />;
                    case 'manage-players':
                        return <ManagePlayersView />;
                    case 'report-score':
                        return <ReportScoreView />;
                    case 'match-history':
                        return <MatchHistoryView />;
                    case 'settings':
                        return <LadderSettingsView 
                            selectedLadder={selectedLadder}
                            setSelectedLadder={setSelectedLadder}
                            setCurrentView={setCurrentView}
                        />;
                    default:
                        return <LoginScreen />;
                }
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    {renderCurrentView()}
                </div>
            );
        };

        ReactDOM.render(<TennisLadderApp />, document.getElementById('root'));
    </script>
</body>
</html>
